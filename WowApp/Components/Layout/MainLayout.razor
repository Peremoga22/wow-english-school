@inherits LayoutComponentBase

<HeadContent>
    <title>We Open the World By Lyubov Vynnytska</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">


    <!-- Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <!-- Libraries -->
    <link href="lib/animate/animate.min.css" rel="stylesheet" />
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet" />

    <!-- Bootstrap -->
   @*  <link href="css/bootstrap.min.css" rel="stylesheet" /> *@
@*     <link href="css/snow.css" rel="stylesheet" />
    <!-- Custom styles -->
    <link href="css/style.css" rel="stylesheet" />
    <link href="/css/giftcertificate.css" rel="stylesheet" />
 *@
    <!-- Styles for site -->
    <link href="/styles/home.css" rel="stylesheet" />
    <link href="/styles/portfolio.css" rel="stylesheet" />
    <link href="/styles/servicespage.css" rel="stylesheet" />
    <link href="/styles/contact.css" rel="stylesheet" />
    <!-- Підключення jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="/site-style.css" rel="stylesheet" />
    <link href="/englishclub.css" rel="stylesheet" />
    <!-- Підключення easing (анімовані переходи) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>

    <!-- Підключення Waypoints -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>

    <script type="module" src="https://cdn.jsdelivr.net/npm/lite-youtube-embed@0.2.0/src/lite-yt-embed.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lite-youtube-embed@0.2.0/src/lite-yt-embed.css">

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="/culture.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/percent.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
   
</HeadContent>

<div class="main d-flex flex-column min-vh-100">
    <Header />
    <main class="flex-grow-1 content px-2 py-3">
        @Body
    </main>
    <Footer/>
</div>

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>

<script>
    (function () {
      const COLLAPSE_ID = 'navbarCollapse';

      function hideNavbar() {
        const el = document.getElementById(COLLAPSE_ID);
        if (!el) return;

        if (window.bootstrap && bootstrap.Collapse) {
          const inst = bootstrap.Collapse.getOrCreateInstance(el, { toggle: false });
          inst.hide();
        } else {
          el.classList.remove('show');
        }
      }

      // узагальнений пошук таргету по шляху події
      function findInPath(e, selector) {
        if (typeof e.composedPath === 'function') {
          const path = e.composedPath();
          for (const n of path) {
            if (n && n.nodeType === 1 && n.matches && n.matches(selector)) {
              return n;
            }
            if (n && n.nodeType === 1 && n.closest) {
              const c = n.closest(selector);
              if (c) return c;
            }
          }
          return null;
        }
        // fallback
        return e.target.closest(selector);
      }

      const selector = [
        '#'+COLLAPSE_ID+' a.nav-link',
        '#'+COLLAPSE_ID+' a[href]',
        '#'+COLLAPSE_ID+' button.nav-link',
        '#'+COLLAPSE_ID+' .btn-logout',
        '#'+COLLAPSE_ID+' form button'
      ].join(',');

      function maybeHide(e) {
        const el = findInPath(e, selector);
        if (el) {
          // даємо Blazor/Bootstrap відпрацювати навігацію — потім ховаємо
          setTimeout(hideNavbar, 0);
        }
      }

      // Кліки + тач + pointer-події
      document.addEventListener('click', maybeHide, true);
      document.addEventListener('pointerup', maybeHide, true);
      document.addEventListener('touchend', maybeHide, true);

      // Клавіатура (Enter/Space) на пунктах меню
      document.addEventListener('keydown', function (e) {
        if ((e.key === 'Enter' || e.key === ' ') && findInPath(e, selector)) {
          setTimeout(hideNavbar, 0);
        }
      }, true);

      // історія/якорі
      window.addEventListener('popstate', hideNavbar);
      window.addEventListener('hashchange', hideNavbar);

      // про всяк — ховаємо після завершення навігації Blazor
      window.addEventListener('blur', function () {
        // якщо відкрито і пішла навігація — сховати
        setTimeout(hideNavbar, 50);
      });
    })();
</script>